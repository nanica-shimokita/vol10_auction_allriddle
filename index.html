<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUCTION</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* HTML/Bodyの基本スタイル */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
        }
        
        /* タブのアクティブ状態のスタイル */
        .tab-active {
            color: #D4AF37; /* primary-gold */
            border-bottom: 3px solid #D4AF37;
        }

        /* プチ謎グリッドの基本スタイル */
        .mini-progress-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8rem;
        }

        /* プチ謎グリッドの未解答スタイル */
        .mini-progress-unsolved {
            background-color: #1F2937; /* bg-gray-800 */
            color: #9CA3AF; /* text-gray-400 */
            border: 1px solid #374151; /* border-gray-700 */
        }

        /* プチ謎グリッドの解答済みスタイル */
        .mini-progress-solved {
            background-color: #065F46; /* green-800 */
            color: #D1FAE5; /* green-100 */
            border: 1px solid #34D399; /* green-400 */
        }

        /* テキストのグロー効果 (目立つ進捗表示用) */
        .text-glow {
            text-shadow: 0 0 5px rgba(212, 175, 55, 0.5); /* primary-goldの影 */
        }
    </style>
</head>
<body onload="showIntroPage()"> 
    <div id="intro-page" class="w-full h-screen flex flex-col justify-center items-center bg-gray-900 text-white opacity-0 transition duration-300">
        <h1 class="text-5xl font-extrabold text-primary-gold mb-8">AUCTION</h1>
        <p class="text-xl mb-10">ようこそ！は？</p>
        <button onclick="showMainContent()" class="bg-primary-gold hover:bg-secondary-sepia text-gray-900 font-bold py-3 px-8 rounded-xl shadow-lg transition duration-300">
            ゲームを始める
        </button>
    </div>

    <div id="main-container" class="hidden min-h-screen bg-gray-900 text-white p-4 md:p-8">

        <div class="tabs mb-6 flex justify-center space-x-4 border-b border-primary-gold/50">
            <button id="tab-main" onclick="switchCollection('main')" class="tab-active p-3 font-bold transition duration-200">
                謎コレクション
            </button>
            <button id="tab-mini" onclick="switchCollection('mini')" class="p-3 font-bold transition duration-200">
                プチ謎
            </button>
        </div>

        <div id="index-page" class="space-y-6 max-w-2xl mx-auto">
            <div id="progress-summary-main">
                </div>
            
            <div class="flex justify-end space-x-2">
                <button onclick="confirmClearProgress('main')" class="text-sm text-red-400 hover:text-red-300 transition">
                    進捗リセット (メイン謎)
                </button>
            </div>
            
            <div id="riddle-list" class="space-y-3">
                </div>
        </div>

        <div id="game-container" class="hidden max-w-2xl mx-auto space-y-6">
            <button onclick="showIndexPage()" class="text-primary-gold hover:text-secondary-sepia transition flex items-center mb-4">
                &lt; 一覧に戻る
            </button>

            <div class="text-center">
                <p id="level-display" class="text-gray-400 text-lg font-medium"></p>
                <h2 id="level-title" class="text-3xl font-extrabold text-white mt-1"></h2>
            </div>
            
            <div id="multi-answer-status" class="hidden text-center text-primary-gold font-bold p-2 bg-gray-800 rounded-lg">
                </div>

            <div id="riddle-text" class="bg-gray-800/50 p-6 rounded-xl border border-primary-gold/30 shadow-inner text-center">
                </div>

            <div class="mt-8 space-y-3">
                <input type="text" id="answer-input" placeholder="答えを入力（ひらがな）" 
                    class="w-full p-3 rounded-lg bg-gray-700 border-2 border-gray-700 focus:border-primary-gold text-white placeholder-gray-400 transition" />
                
                <p id="feedback-message" class="text-center font-bold h-6"></p>

                <button id="submit-button" onclick="checkAnswer()" 
                    class="w-full bg-primary-gold hover:bg-secondary-sepia text-gray-900 font-extrabold py-3 rounded-lg transition duration-200">
                    解答する
                </button>
            </div>
        </div>
        
        <div id="mini-challenge-page" class="hidden max-w-md mx-auto space-y-6 text-center">
            <h2 class="text-3xl font-bold text-white">プチ謎チャレンジ (56問)</h2>
            
            <div class="text-center p-4 bg-gray-800/50 rounded-xl border border-secondary-sepia/70 shadow-inner">
                <p class="text-sm font-medium text-gray-400 mb-1">現在のクリア進捗</p>
                <p id="mini-progress-summary" class="text-4xl font-extrabold text-white text-glow">
                    </p>
            </div>
            
            <button onclick="showMiniIndexPage()" class="text-sm text-secondary-sepia hover:text-primary-gold transition">
                >> 解答済みリストを確認
            </button>

            <div class="mt-4 space-y-3">
                <input type="text" id="mini-answer-input" placeholder="答えを入力（ひらがな）" 
                    class="w-full p-3 rounded-lg bg-gray-700 border-2 border-gray-700 focus:border-secondary-sepia text-white placeholder-gray-400 transition" />
                
                <p id="mini-feedback-message" class="text-center font-bold h-6"></p>

                <button id="mini-submit-button" onclick="checkMiniAnswer()" 
                    class="w-full bg-secondary-sepia hover:bg-primary-gold text-gray-900 font-extrabold py-3 rounded-lg transition duration-200">
                    答えをチェック
                </button>
            </div>
            <button onclick="confirmClearProgress('mini')" class="text-sm text-red-400 hover:text-red-300 transition">
                進捗リセット (プチ謎)
            </button>
        </div>

        <div id="mini-index-page" class="hidden max-w-4xl mx-auto space-y-6 text-center">
            <button onclick="showMiniChallengePage()" class="text-secondary-sepia hover:text-primary-gold transition flex items-center mb-4">
                &lt; 解答画面に戻る
            </button>
            <h2 class="text-3xl font-bold text-white">プチ謎 解答済みリスト</h2>
            <p id="mini-index-unsolved-count" class="text-lg text-gray-400"></p>

            <div id="mini-progress-grid" class="grid gap-2 p-4 bg-gray-800 rounded-lg" style="grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));">
                </div>
        </div>

    </div>

    <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 opacity-0 hidden transition-opacity duration-300" onclick="hideModal()">
        <div class="bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6 space-y-4" onclick="event.stopPropagation()">
            <h3 id="modal-title" class="text-xl font-bold text-primary-gold"></h3>
            <div id="modal-content" class="text-white"></div>
            <div class="flex justify-end space-x-3 mt-4">
                <button id="modal-button-cancel" 
                    class="text-gray-400 hover:text-white py-2 px-4 rounded-lg transition hidden">
                    キャンセル
                </button>
                <button id="modal-button-confirm" class="font-bold py-2 px-4 rounded-lg transition">
                    OK
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

</body>
</html>
