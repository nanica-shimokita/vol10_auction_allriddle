<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUCTION ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚µã‚¤ãƒˆ</title>
    
<script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%); 
            color: #e4e4e4;
            min-height: 100vh; 
        }
        .riddle-card {
            background-color: #1a202c; 
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
            border-radius: 1rem; 
        }
        .text-glow {
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }
        .completed {
            border-left: 5px solid #059669; 
        }
        .title-serif {
            font-family: 'Georgia', 'Times New Roman', serif;
        }
        .tab-active {
            border-bottom: 2px solid #D4AF37;
            color: #E0B050;
        }
        .mini-progress-item {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            border-radius: 0.5rem;
            transition: all 0.3s;
            cursor: default;
        }
        .mini-progress-solved {
            background-color: #059669;
            color: #fff;
            box-shadow: 0 0 12px rgba(5, 150, 105, 0.8);
        }
        .mini-progress-unsolved {
            background-color: #374151;
            color: #9ca3af;
            border: 1px solid #4b5563;
        }
        .riddle-info-only {
            cursor: default !important;
            opacity: 0.5;
            background-color: #27272a !important;
            border-left: 5px solid #52525b !important;
        }
    </style>
    <script>
        tailwind.config={theme:{extend:{colors:{'primary-gold':'#D4AF37','secondary-sepia':'#E0B050'}}}}
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- ========== ã‚¤ãƒ³ãƒˆãƒ­ï¼ˆã‚ã‚‰ã™ã˜ï¼‰ãƒšãƒ¼ã‚¸ ========== -->
    <div id="intro-page" class="w-full max-w-lg p-6 md:p-10 transition-opacity duration-500 opacity-0 hidden">
    <div class="bg-white/5 p-12 rounded-2xl shadow-2xl border-t-8 border-primary-gold flex flex-col items-center justify-center min-h-[400px]">
        <h1 class="title-serif text-4xl md:text-5xl font-bold text-center mb-6 text-secondary-sepia text-glow">
            AUCTION
        </h1>
        <p class="text-sm font-medium text-left text-white mb-6">
            æœ¬ã‚µã‚¤ãƒˆã§ã¯ã€ŒAUCTIONã€å†…ã§ç™»å ´ã—ãŸè¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ—ãƒè¬ã‚’å…¨ã¦è§£ãã“ã¨ãŒã§ãã¾ã™ã€‚
        </p>
        <p class="text-sm font-medium text-left text-white mb-6">
            ã‚¢ã‚¤ãƒ†ãƒ ãŒå¿…è¦ãªè¬ã¯ä¸€éƒ¨æ³¨é‡ˆã‚’åŠ ãˆã€å¯èƒ½ãªé™ã‚Šå®Ÿéš›ã®çŠ¶æ³ã‚’å†ç¾ã—ã¦ã„ã¾ã™ã€‚
        </p>
        <p class="text-sm font-medium text-left text-white mb-10">
            æœ¬ã‚µã‚¤ãƒˆURLã®å…±æœ‰ã¯ç¦æ­¢ã§ã™ã€‚
        </p>
        <button onclick="showMainContent()" 
                class="w-full max-w-xs py-4 bg-primary-gold text-gray-900 font-black text-xl rounded-xl shadow-lg 
                       hover:bg-secondary-sepia transition duration-300 transform hover:scale-[1.05] active:scale-[0.98] 
                       focus:outline-none focus:ring-4 focus:ring-primary-gold focus:ring-opacity-50">
            ã¯ã˜ã‚ã‚‹
        </button>
    </div>
</div>
    <!-- ========== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ³ãƒ†ãƒŠ (æ—¢å­˜ã®å…¨ä½“) ========== -->
    <div id="main-container" class="w-full max-w-xl p-6 md:p-10 rounded-xl border-4 border-primary-gold transition-all duration-300 riddle-card hidden">
        <h1 class="title-serif text-3xl md:text-5xl font-bold text-center mb-8 text-secondary-sepia text-glow">
            AUCTION
        </h1>

        <div class="flex border-b border-gray-700 mb-6">
            <button id="tab-main" onclick="switchCollection('main')" class="px-4 py-2 text-lg font-semibold text-gray-400 hover:text-white transition duration-200">
                è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
            </button>
            <button id="tab-mini" onclick="switchCollection('mini')" class="px-4 py-2 text-lg font-semibold text-gray-400 hover:text-white transition duration-200">
                ãƒ—ãƒè¬
            </button>
        </div>
        
        <!-- è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç›®æ¬¡ãƒšãƒ¼ã‚¸ -->
        <div id="index-page" class="hidden">
            <div id="progress-summary-main" class="mb-6"></div>
            <h2 class="text-xl md:text-2xl font-semibold mb-4 text-white">
                è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
            </h2>
            <div id="riddle-list" class="space-y-3"></div>
            <p class="text-xs text-gray-400 mt-6 text-center">
                â€»ã‚¯ãƒªã‚¢çŠ¶æ³ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™ã€‚
            </p>
            <button onclick="confirmClearProgress('main')" class="mt-4 w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition duration-200 text-sm">
                é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆ
            </button>
        </div>

        <!-- ãƒ—ãƒè¬ãƒšãƒ¼ã‚¸ -->
        <div id="mini-challenge-page" class="hidden text-center">
            <h2 class="text-xl md:text-2xl font-semibold mb-2 text-secondary-sepia">
                ãƒ—ãƒè¬
            </h2>
            <div id="mini-progress-summary" class="text-white text-4xl font-extrabold mb-6 p-4 bg-gray-800/50 rounded-xl border border-primary-gold/70 shadow-inner">
                <!-- é€²æ—ã‚µãƒãƒªãƒ¼ --></div>
            
            <p>
            <a href="catalog.html" target="_blank" rel="noopener noreferrer">
                <button>ã‚«ã‚¿ãƒ­ã‚°ã‚’è¦‹ã‚‹</button>
            </a>
            </p>
            
            <img src="ãƒ•ã‚šãƒè¬_1.png" alt="ãƒ—ãƒè¬ç”»åƒ" class="mx-auto my-6 max-w-full rounded-lg shadow-xl" />
            <img src="ãƒ•ã‚šãƒè¬_2.png" alt="ãƒ—ãƒè¬ç”»åƒ" class="mx-auto my-6 max-w-full rounded-lg shadow-xl" />
            <img src="ãƒ•ã‚šãƒè¬_3.png" alt="ãƒ—ãƒè¬ç”»åƒ" class="mx-auto my-6 max-w-full rounded-lg shadow-xl" />
            <img src="ãƒ•ã‚šãƒè¬_4.png" alt="ãƒ—ãƒè¬ç”»åƒ" class="mx-auto my-6 max-w-full rounded-lg shadow-xl" />
            <p class="text-lg font-medium text-gray-400 mb-4">
                56å•ã®ãƒ—ãƒè¬ã®ç­”ãˆã‚’ã™ã¹ã¦å…¥åŠ›ã—ã€å®Œå…¨ã‚¯ãƒªã‚¢ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ï¼
            </p>

            <div class="flex flex-col gap-4 mb-6">
                <input type="text" id="mini-answer-input" placeholder="ç­”ãˆã‚’å…¥åŠ›ï¼ˆã²ã‚‰ãŒãªï¼‰" class="w-full p-3 rounded-lg border-2 border-primary-gold bg-gray-800 text-white focus:outline-none focus:border-secondary-sepia transition duration-200 text-center text-lg">
                <button onclick="checkMiniAnswer()" id="mini-submit-button" class="bg-secondary-sepia hover:bg-yellow-400 text-gray-900 font-extrabold py-3 px-6 rounded-lg transition duration-200 shadow-xl hover:shadow-2xl active:scale-95">
                    è§£ç­”ã™ã‚‹
                </button>
            </div>

            <button onclick="showMiniIndexPage()" class="w-full bg-blue-700 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 text-sm mb-4">
                é€²æ—ã‚’ç¢ºèªã™ã‚‹ï¼ˆå•é¡Œç•ªå·ä¸€è¦§ï¼‰
            </button>
           

            <div id="mini-message-area" class="h-8 mb-6">
                <p id="mini-feedback-message" class="font-bold text-lg"></p>
            </div>
            
            <button onclick="confirmClearProgress('mini')" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition duration-200 text-sm">
                ãƒ—ãƒè¬ã®é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆ
            </button>
        </div>

        
        <!-- ãƒ—ãƒè¬é€²æ—ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ --><div id="mini-index-page" class="hidden">
            <button onclick="showMiniChallengePage()" class="text-sm text-secondary-sepia hover:text-white mb-6 flex items-center transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
                ãƒ—ãƒè¬è§£ç­”ç”»é¢ã«æˆ»ã‚‹
            </button>
            
            <h2 class="text-xl md:text-2xl font-semibold mb-4 text-white">
                ãƒ—ãƒè¬ é€²æ—ãƒªã‚¹ãƒˆ (å…¨56å•)
            </h2>
            <div id="mini-progress-grid" class="grid grid-cols-6 gap-3 justify-center">
                <!-- é€²æ—ã‚°ãƒªãƒƒãƒ‰ãŒå…¥ã‚Šã¾ã™ --></div>
            <p id="mini-index-unsolved-count" class="text-center text-lg mt-6 font-medium text-primary-gold"></p>
        </div>
        
        <!-- å€‹åˆ¥è¬è§£ããƒšãƒ¼ã‚¸ --><div id="game-container" class="hidden">
            <button onclick="showIndexPage()" class="text-sm text-secondary-sepia hover:text-white mb-6 flex items-center transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
                è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ã«æˆ»ã‚‹
            </button>
            
            <p id="level-title" class="text-center text-xl mb-2 font-bold text-secondary-sepia"></p>
            <p id="multi-answer-status" class="text-center text-sm mb-2 font-medium text-primary-gold hidden"></p>
            <p id="level-display" class="text-center text-sm mb-6 font-medium text-gray-400"></p>
            <div id="riddle-text" class="text-center text-xl md:text-2xl font-medium mb-8 p-4 bg-gray-900/30 rounded-lg border border-primary-gold/50 flex flex-col items-center justify-center min-h-[300px]"></div>
            
            <div class="flex flex-col md:flex-row gap-4 mb-6">
                <input type="text" id="answer-input" placeholder="ç­”ãˆã‚’å…¥åŠ›ï¼ˆã²ã‚‰ãŒãªï¼‰" class="w-full md:w-auto flex-grow p-3 rounded-lg border-2 border-primary-gold bg-gray-800 text-white focus:outline-none focus:border-secondary-sepia transition duration-200">
                <button onclick="checkAnswer()" id="submit-button" class="bg-secondary-sepia hover:bg-yellow-400 text-gray-900 font-extrabold py-3 px-6 rounded-lg transition duration-200 shadow-xl hover:shadow-2xl active:scale-95">
                    è§£ç­”ã™ã‚‹
                </button>
            </div>
            <div id="message-area" class="text-center h-8">
                <p id="feedback-message" class="font-bold text-lg"></p>
            </div>
        </div>

    </div>
    <!-- ============================================== --><!-- ========== ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒ†ãƒŠ ========== --><div id="message-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden p-4 transition-opacity duration-300 opacity-0">
        <div class="bg-white text-gray-900 p-8 rounded-xl text-center max-w-sm w-full">
            <h2 id="modal-title" class="text-3xl font-bold text-green-700 mb-4"></h2>
            <p id="modal-content" class="mb-6"></p>
            <div class="flex justify-center gap-4">
                <button onclick="hideModal()" id="modal-button-confirm" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                    é–‰ã˜ã‚‹
                </button>
                <button onclick="hideModal()" id="modal-button-cancel" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hidden">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
            </div>
        </div>
    </div>
    <!-- ============================================== --><script>
        // --- 1. ãƒ‡ãƒ¼ã‚¿å®šç¾©ï¼ˆè¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ ---
        const mainRiddles = [
            {ã€€level: 1,title: "ANIMAGRAM",question: "", imageUrls: ["A_1.png"], answer: "ãµãŸã“ã¶ã‚‰ãã "},
            {  level: 2, title: "Box of Maze", question: "â€»å®Ÿéš›ã«ã¯ç®±ã‚’å‹•ã‹ã™ã“ã¨ãŒã§ããªã„ãŸã‚ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ãã‚Œãã‚ŒãŒè¦‹ãˆã¦ã„ã‚‹é¢ã®æƒ…å ±ã‚’å…±æœ‰ã—åˆã„ãªãŒã‚‰è§£ãé€²ã‚ã¾ã™ã€‚", imageUrls: ["B_rule.png","B_1.png", "B_2.png","B_3.png","B_4.png"], answer: "ã•ã„ãã‚“"},
            { level: 3, title: "CUT AND CONNECT", question: "ä¸Šè¨˜è¬ã«åŠ ãˆã¦2cmå¹…ã®ç™½ã„ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ—ãŒä¸€ç·’ã«æ‰‹ã«å…¥ã‚Šã¾ã™ã€‚", imageUrls: ["C_1.png"], answer: "ã™ã‹ã„"},
            { level: 4, title: "DEVIDED WORLD", question: "", imageUrls: ["D_1.png"], answer: "ã²ã£ã¨", 
                         tools:[
                             { url: "D_red.html", text: "èµ¤ã‚’æ‹…å½“ã™ã‚‹" },
                             { url: "D_green.html", text: "ç·‘ã‚’æ‹…å½“ã™ã‚‹" },
                             { url: "D_yellow.html", text: "é»„ã‚’æ‹…å½“ã™ã‚‹" },
                             { url: "D_blue.html", text: "é’ã‚’æ‹…å½“ã™ã‚‹" },
                             { url: "D_red.html", text: "èµ¤ã®ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹" },
                             { url: "D_green.html", text: "ç·‘ã®ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹" },
                             { url: "D_yellow.html", text: "é»„ã®ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹" },
                             { url: "D_blue.html", text: "é’ã®ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹" }
                         ]},
            { level: 5, title: "ENSHRINE TOWER", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["E_1.png"], answer: "ã¾ã¦ã‚“ã‚ã†"},
            { level: 6, title: "FORMULA", question: "", imageUrls: ["F_1.png", "F_2.png"], answer: "ã•ã‚“ã›ã£ã¨",
                            tools:[
                             { url: "vip.html", text: "VIPã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—ã‚’è¦‹ã‚‹" },
                             { url: "formula.html", text: "å¿…è¦ãªã‚‚ã®ã‚’æ‰‹ã«å…¥ã‚ŒãŸãã®å…ˆã®æƒ…å ±ã‚’è¦‹ã‚‹" }
                        ]},
            { level: 7, 
                title: "é£›è¡Œèˆ¹ã®çµµç”»", 
                question: "ã“ã®è¬ã¯ã€Œæ•‘æ¸ˆã‚¿ã‚¤ãƒ ã€ã®è¡¨ç¤ºå•é¡Œã§ã™ã€‚å›ç­”ã¯ã€Œãã‚…ã†ã•ã„ãŸã„ã‚€ã€ã§ã™ã€‚", 
                imageUrls: ["image_67a302.png"], 
                answer: "ãã‚…ã†ã•ã„ãŸã„ã‚€", 
                interactive: false, // å›ç­”ä¸è¦ã®ãƒ•ãƒ©ã‚°ï¼ˆã‚¯ãƒªãƒƒã‚¯ä¸å¯å¯¾è±¡ï¼‰
                hint: "å•é¡Œæ–‡ã«ç­”ãˆãŒæ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚" 
            },
            { level: 8, title: "G-SQUARE", question: "", imageUrls: ["G_1.png", "G_2.png"], answer: "ã»ã†ã„ã˜ã—ã‚“"},
            { level: 9, title: "HARMONY", question: "", imageUrls: ["H_1.png"], answer: "ã¯ã£ã‘ã‚“", hint: "æ³•å¾‹ç”¨èªã§ã™ã€‚" },
            { level: 10, title: "INTERSECT", question: "â€»æœ¬æ¥ã¯åŠé€æ˜ã‚·ãƒ¼ãƒˆã‚’è¬ã«é‡ã­ã€ã‚·ãƒ¼ãƒˆã‚’å›ã—ãªãŒã‚‰â‘¡ã‚’é€²ã‚ã¾ã™ã€‚ä»Šå›ã¯â‘¡ãŒã§ããŸçŠ¶æ…‹ã‚’ä¸‹è¨˜ã‹ã‚‰é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚", imageUrls: ["I_1.png"], answer: "ãŸã„ã‚€",
                            tools:[
                             { url: "vip.html", text: "åŠé€æ˜ã‚·ãƒ¼ãƒˆã‚’é‡ã­ãŸçŠ¶æ…‹ã®è¬ã‚’è¦‹ã‚‹" },
                        ]},
            { level: 11, title: "JUDGE", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["J_1.png", "J_2.png"], answer: "ã—ã‚“ã•ã",
                            tools:[
                             { url: "vip.html", text: "VIPã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—ã‚’è¦‹ã‚‹" },
                             { url: "judge.html", text: "å¿…è¦ãªã‚‚ã®ã‚’æ‰‹ã«å…¥ã‚ŒãŸãã®å…ˆã®æƒ…å ±ã‚’è¦‹ã‚‹" }
                        ]},
            { level: 12, title: "KNOW AND COLOR", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["K_1.png"], answer: "ã•ãã›ã™", hint: "æˆåŠŸã®è‹±èªèª­ã¿ã§ã™ã€‚" },
            { level: 13, title: "LUMINOUS", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["L_1.png","L_2.png"], answer: "ã‹ã„ã©ãã‹ã‚“ã‚Šã‚‡ã†", hint: "å…¨ã¦èª­ã¿çµ‚ãˆã¾ã—ãŸã€‚" },
            { level: 14, title: "MEAN", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["M_1.png"],answer: ["ã‚ã‚“ã”ã†", "ã˜ã‚‡ã†ã‚ˆ", "ã¨ãŠã¼ãˆ", "ã—ã®ã®ã‚"], hint: "4ã¤ã®è¨€è‘‰ãŒç­”ãˆã«ãªã‚Šã¾ã™ã€‚", multi: true },
            { level: 15, title: "NO ORDER", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["N_1.png"], answer: "ã¾ã‚“ã˜ã‚…ã†", hint: "å’Œè“å­ã®ä¸€ã¤ã§ã™ã€‚" },
            { level: 16, title: "ORIGAMI", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["O_1.png"], answer: "ããƒ¼ã‚‹", hint: "ã‹ã£ã“ã„ã„ã®è‹±èªèª­ã¿ã§ã™ã€‚" },
            { level: 17, title: "POWER OF RIDDLE", question: "ã“ã“ã«è¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™", imageUrls: ["P_1.png"], answer: "ã‚ã‚ã‚ãŒã‚Š", hint: "é›¨ã®å¾Œã®å¤©æ°—ã§ã™ã€‚" },
            { 
                level: 18, 
                title: "HEART WARMING", 
                question: "ã“ã®è¬ã¯ã€ã“ã‚Œã¾ã§ã®å…¨ã¦ã®è¬ã‚’è§£ã„ãŸã‚ãªãŸã¸ã®æ„Ÿè¬ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚ã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼", 
                interactive: false, // å›ç­”ä¸è¦ã®ãƒ•ãƒ©ã‚°ï¼ˆã‚¯ãƒªãƒƒã‚¯ä¸å¯å¯¾è±¡ï¼‰
                answer: "", 
                hint: "ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼" 
            },
        ];
        
        // --- 2. ãƒ‡ãƒ¼ã‚¿å®šç¾©ï¼ˆãƒ—ãƒè¬ 56å•ï¼‰ ---
        const miniAnswers = [
            "ã‚ãƒ¼ã¨", "ã™ãªã¨ã‘ã„", "ã¦ã‚“ã¨", "ã™ã®ãƒ¼", "ã‚ã„ã‚“", "ã¾ã­ãƒ¼", "ã«ã‚…ã†ã•ã¤", "ã›ã‚“ã¡ã‚ƒã", "ã»ã®ãŠ", "ã’ã‚“ã¦ã‚“", // 1-10
            "ã“ã„ã‚“", "ã¯ã£ã¨", "ã¡ã—ã", "ã•ã„ã", "ã™ã‹ã„", "ã—ãœã‚“", "ã‹ãŸã¡", "ã¯ãªãŸã°", "ã‚ãŒã¾ã¾", "ãŸã¡ã°", // 11-20
            "ãã‚“ãŒ", "ã¿ã", "ã†ãƒã‚“ã", "ã“ã‚ã„ã‚", "ã‹ã‚ã‚‰", "ã™ã„ã¨ã†", "ã—ã‚“ã—ã¤", "ãˆã”ã“ã‚", "ã„ã„ã‚“ã¡ã‚‡ã†", "ã‹ã‚‰ãƒ¼", // 31-40
            "ã‚ãã—ã‚‡ã‚“", "ã‚ã²ã‚‹", "ãŠãªã‹", "ãµã‰ãƒ¼ã‹ã™", "ã¯ã‹ã›", "ã•ã„ã‚“", "ã‚Šã‚ã‚“", "ãã¡ã©ã‚", "ã¦ã‚“ãã†", "ãˆã³", // 31-40
            "ã¸ã„ã—ã", "ã¾ãªã„ãŸ", "ã‚‚ã†ã‚‰", "ã‚ã£ãã™", "ã—ã“ã¿", "ãˆã‚“ã˜ã‡ã‚‹", "ã©ã‚“ã", "ã§ãã¡", "ãŠã‚‹ã”ãƒ¼ã‚‹", "ã›ã„ã¨ã†", // 41-50
            "ãã˜ã‚‰", "ã‹ãµã‡", "ã“ã†ã†ã‚“", "ã‹ã­ã‹ã—", "ãªã¾ãˆ", "ã²ã¤ã‚ˆã†" // 51-56 (ä»¥å‰ã¯ãªã¾ãˆãŒé‡è¤‡ã—ã¦ã„ãŸãŸã‚ã€æœ€å¾Œã®ä¸€ã¤ã‚’ã²ã¤ã‚ˆã†ã«å¤‰æ›´)
        ];
        
        // --- 3. ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆã¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼ã®å®šç¾© ---
        let currentLevelIndex = 0;
        let currentCollection = 'main'; // 'main' ã¾ãŸã¯ 'mini'
        
        // **ç”»é¢é·ç§»ã‚¹ãƒ†ãƒ¼ãƒˆ**
        let currentPage = 'intro'; // 'intro' ã¾ãŸã¯ 'main'

        // ãƒ¡ã‚¤ãƒ³è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼
        const MAIN_STORAGE_KEY = 'riddle_completion_status'; 
        const MAIN_MULTI_STORAGE_KEY = 'riddle_multi_answers'; 
        
        // ãƒ—ãƒè¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼
        const MINI_COMPLETED_ANSWERS_KEY = 'mini_challenge_answers'; 
        const MINI_TOTAL_COUNT = miniAnswers.length; 

        // HTMLè¦ç´ ã®å‚ç…§
        const introPage = document.getElementById('intro-page'); // æ–°ã—ãè¿½åŠ 
        const mainContainer = document.getElementById('main-container'); // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¨ä½“

        const tabMain = document.getElementById('tab-main');
        const tabMini = document.getElementById('tab-mini');
        const indexPage = document.getElementById('index-page');
        const miniChallengePage = document.getElementById('mini-challenge-page');
        const miniIndexPage = document.getElementById('mini-index-page'); 
        const gameContainer = document.getElementById('game-container');
        const riddleList = document.getElementById('riddle-list');
        const progressSummaryMain = document.getElementById('progress-summary-main');
        
        // ãƒ—ãƒè¬ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ç”¨è¦ç´ 
        const miniProgressSummary = document.getElementById('mini-progress-summary');
        const miniAnswerInput = document.getElementById('mini-answer-input');
        const miniFeedbackMessage = document.getElementById('mini-feedback-message');
        const miniProgressGrid = document.getElementById('mini-progress-grid'); 
        const miniIndexUnsolvedCount = document.getElementById('mini-index-unsolved-count'); 
        
        // å€‹åˆ¥è¬ç”»é¢ç”¨è¦ç´  (mainRiddlesç”¨)
        const levelTitle = document.getElementById('level-title');
        const levelDisplay = document.getElementById('level-display');
        const multiAnswerStatus = document.getElementById('multi-answer-status');
        const riddleText = document.getElementById('riddle-text');
        const answerInput = document.getElementById('answer-input');
        const feedbackMessage = document.getElementById('feedback-message');
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ 
        const messageModal = document.getElementById('message-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalButtonConfirm = document.getElementById('modal-button-confirm');
        const modalButtonCancel = document.getElementById('modal-button-cancel');
        
        
        // --- ãƒ‡ãƒ¼ã‚¿/ã‚­ãƒ¼/è¬ã®å–å¾—ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° ---

        /**
         * ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹è¬ã®ãƒ‡ãƒ¼ã‚¿é…åˆ—ã‚’è¿”ã—ã¾ã™ã€‚
         */
        function getCurrentRiddles() {
            return mainRiddles;
        }

        /**
         * ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚
         */
        function getStorageKeys() {
            if (currentCollection === 'main') {
                return {
                    completion: MAIN_STORAGE_KEY,
                    multi: MAIN_MULTI_STORAGE_KEY
                };
            } else {
                return {
                    completion: MINI_COMPLETED_ANSWERS_KEY, 
                    multi: null
                };
            }
        }
        
        // --- ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰/ä¿å­˜é–¢æ•° ---

        /**
         * ã‚²ãƒ¼ãƒ ã®é€²æ—çŠ¶æ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚
         */
        function loadProgress() {
            const key = getStorageKeys().completion;
            const storedData = localStorage.getItem(key);
            
            if (currentCollection === 'mini') {
                // ãƒ—ãƒè¬ã®å ´åˆã€Setã®ã‚ˆã†ã«é‡è¤‡ãŒãªã„ã“ã¨ã‚’å‰æã¨ã™ã‚‹Arrayã‚’è¿”ã™
                return storedData ? JSON.parse(storedData) : [];
            } else {
                // ãƒ¡ã‚¤ãƒ³è¬ã®å ´åˆã€ã‚¯ãƒªã‚¢çŠ¶æ…‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™
                return storedData ? JSON.parse(storedData) : {};
            }
        }
        
        /**
         * è¤‡æ•°å›ç­”ã®é€²æ—çŠ¶æ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚
         */
        function loadMultiProgress(index) {
            const key = getStorageKeys().multi;
            if (!key) return []; 
            
            const storedData = localStorage.getItem(key);
            const allMulti = storedData ? JSON.parse(storedData) : {};
            return allMulti[index] || []; 
        }

        /**
         * ãƒ¡ã‚¤ãƒ³è¬ã®ã‚¯ãƒªã‚¢çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¾ã™ã€‚
         */
        function saveCompletion(index) {
            if (currentCollection !== 'main') return;
            const key = getStorageKeys().completion;
            const progress = loadProgress();
            progress[index] = true;
            localStorage.setItem(key, JSON.stringify(progress));
        }

        /**
         * ãƒ¡ã‚¤ãƒ³è¬ã®è¤‡æ•°å›ç­”ã®é€²æ—ã‚’ä¿å­˜ã—ã¾ã™ã€‚
         */
        function saveMultiAnswer(index, answer) {
            if (currentCollection !== 'main') return;
            const key = getStorageKeys().multi;
            const storedData = localStorage.getItem(key);
            const allMulti = storedData ? JSON.parse(storedData) : {};
            
            if (!allMulti[index]) {
                allMulti[index] = [];
            }
            allMulti[index].push(answer);
            localStorage.setItem(key, JSON.stringify(allMulti));
        }
        
        /**
         * ãƒ—ãƒè¬ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã§æ­£è§£ã—ãŸç­”ãˆã‚’ä¿å­˜ã—ã¾ã™ã€‚
         */
        function saveMiniAnswer(answer) {
            let solvedAnswers = loadProgress(); 
            if (!solvedAnswers.includes(answer)) {
                solvedAnswers.push(answer);
                localStorage.setItem(MINI_COMPLETED_ANSWERS_KEY, JSON.stringify(solvedAnswers));
            }
            return solvedAnswers.length;
        }

        // --- æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° ---

        /**
         * ãƒ†ã‚­ã‚¹ãƒˆã‚’æ­£è¦åŒ–ï¼ˆã²ã‚‰ãŒãªåŒ–ã€ç©ºç™½é™¤å»ï¼‰ã—ã¾ã™ã€‚
         */
        function normalizeText(text) {
            if (!text) return '';
            // å…¨è§’ã‚’åŠè§’ã«ã€å¤§æ–‡å­—ã‚’å°æ–‡å­—ã«ã€æ¿ç‚¹/åŠæ¿ç‚¹ã®å‡¦ç†ï¼ˆæ—¥æœ¬èªã«ç‰¹åŒ–ã—ãªã„ãŸã‚ä»Šå›ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªå‡¦ç†ï¼‰
            let normalized = String(text).toLowerCase().trim().replace(/[\sã€€]/g, '');
            // ã‚«ã‚¿ã‚«ãƒŠã‚’ã²ã‚‰ãŒãªã«ã™ã‚‹å‡¦ç† (ç°¡å˜ãªã‚‚ã®ã®ã¿)
            normalized = normalized.replace(/[\u30a1-\u30f6]/g, function(match) {
                var chr = match.charCodeAt(0) - 0x60;
                return String.fromCharCode(chr);
            });
            return normalized;
        }

        /**
         * æ±ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆ/ã‚³ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ ã®ä»£æ›¿ï¼‰
         * @param {string} title - ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«
         * @param {string} content - ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å†…å®¹
         * @param {string} confirmText - ç¢ºå®šãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ
         * @param {string} confirmClass - ç¢ºå®šãƒœã‚¿ãƒ³ã® Tailwind ã‚¯ãƒ©ã‚¹
         * @param {Function} onConfirm - ç¢ºå®šæ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•° (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
         * @param {string} [cancelText] - ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
         */
        function showCustomModal(title, content, confirmText, confirmClass, onConfirm, cancelText) {
            // åˆæœŸçŠ¶æ…‹ã‚’éè¡¨ç¤ºã«
            messageModal.classList.add('opacity-0', 'hidden'); 

            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚»ãƒƒãƒˆ
            modalTitle.innerHTML = title;
            modalContent.innerHTML = content;
            modalButtonConfirm.textContent = confirmText || 'OK';
            modalButtonConfirm.className = `font-bold py-2 px-4 rounded-lg transition ${confirmClass || 'bg-blue-500 hover:bg-blue-600 text-white'}`;
            
            // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã®åˆ¶å¾¡
            if (onConfirm && cancelText) {
                modalButtonCancel.textContent = cancelText;
                modalButtonCancel.classList.remove('hidden');
                modalButtonCancel.onclick = hideModal;
            } else {
                modalButtonCancel.classList.add('hidden');
            }

            // ç¢ºå®šãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
            modalButtonConfirm.onclick = () => {
                hideModal();
                if (onConfirm) {
                    onConfirm();
                }
            };
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
            setTimeout(() => {
                messageModal.classList.remove('hidden');
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã‚ãšã‹ãªé…å»¶
                setTimeout(() => {
                    messageModal.classList.remove('opacity-0');
                }, 10);
            }, 0);
        }
        
        /**
         * ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’éè¡¨ç¤ºã«ã—ã¾ã™ã€‚
         */
        function hideModal() {
            messageModal.classList.add('opacity-0');
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã« hidden ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            setTimeout(() => {
                messageModal.classList.add('hidden');
            }, 300);
        }

        // --- UIè¡¨ç¤ºé–¢æ•° ---
        
        /**
         * ã‚¤ãƒ³ãƒˆãƒ­ï¼ˆã‚ã‚‰ã™ã˜ï¼‰ç”»é¢ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
         */
        function showIntroPage() {
            currentPage = 'intro';
            mainContainer.classList.add('hidden');
            introPage.classList.remove('hidden');
            // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            setTimeout(() => {
                introPage.classList.remove('opacity-0');
            }, 50);
        }

        /**
         * ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¨ä½“ã‚’è¡¨ç¤ºã—ã€è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®æ¬¡ç”»é¢ã‚’åˆæœŸè¡¨ç¤ºã—ã¾ã™ã€‚
         */
        function showMainContent() {
            currentPage = 'main';
            // ã‚¤ãƒ³ãƒˆãƒ­ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆï¼†éè¡¨ç¤º
            introPage.classList.add('opacity-0');
            setTimeout(() => {
                introPage.classList.add('hidden');
                // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                mainContainer.classList.remove('hidden');
                switchCollection('main'); // è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®æ¬¡ã‚’åˆæœŸè¡¨ç¤º
            }, 300);
        }

        /**
         * ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚
         */
        function switchCollection(collection) {
            currentCollection = collection;
            
            // ã‚¿ãƒ–ã®è¦‹ãŸç›®ã‚’æ›´æ–°
            tabMain.classList.remove('tab-active');
            tabMini.classList.remove('tab-active');
            
            // å…¨ã¦ã®ã‚²ãƒ¼ãƒ /ç›®æ¬¡ã‚³ãƒ³ãƒ†ãƒŠã‚’éè¡¨ç¤ºã«
            indexPage.classList.add('hidden');
            gameContainer.classList.add('hidden');
            miniChallengePage.classList.add('hidden');
            miniIndexPage.classList.add('hidden'); 

            if (collection === 'main') {
                tabMain.classList.add('tab-active');
                showIndexPage();
            } else {
                tabMini.classList.add('tab-active');
                showMiniChallengePage();
            }
        }

        /**
         * ãƒ¡ã‚¤ãƒ³è¬ã®ç›®æ¬¡ç”»é¢ã‚’è¡¨ç¤ºã—ã€è¬ã®ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚
         */
        function showIndexPage() {
            indexPage.classList.remove('hidden');
            gameContainer.classList.add('hidden');
            miniChallengePage.classList.add('hidden');
            miniIndexPage.classList.add('hidden');

            riddleList.innerHTML = ''; // ãƒªã‚¹ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ

            const riddles = getCurrentRiddles(); // ãƒ¡ã‚¤ãƒ³è¬ã‚’å–å¾—
            const progress = loadProgress(); // ãƒ¡ã‚¤ãƒ³è¬ã®é€²æ—ã‚’å–å¾—

            // --- é€²æ—çŠ¶æ³ã®è¨ˆç®—ã¨è¡¨ç¤º ---
            let completedRiddles = 0;
            // interactiveãŒfalseã®ã‚‚ã®ã¯é€²æ—ã®åˆ†æ¯ã«å«ã‚ãªã„ã‚ˆã†ã«ä¿®æ­£
            const totalAnswerableRiddles = riddles.filter(r => r.interactive !== false).length; 

            
            riddles.forEach((riddle, index) => {
                
                const isInteractive = riddle.interactive !== false; 
                let isCompleted = progress[index] || false; 

                // interactiveãŒfalseã®å ´åˆã¯ã€é€²æ—è¨ˆç®—ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ãƒœã‚¿ãƒ³ç”Ÿæˆã«é€²ã‚€
                if (isInteractive) {
                    // è¤‡æ•°å›ç­”ã®å ´åˆã¯å®Œå…¨ã‚¯ãƒªã‚¢ã—ã¦ã„ã‚‹ã‹ã‚’åˆ¤å®š
                    if (riddle.multi) {
                        const solvedAnswers = loadMultiProgress(index);
                        const totalAnswers = Array.isArray(riddle.answer) ? riddle.answer.length : 1;
                        if (solvedAnswers.length === totalAnswers) {
                            completedRiddles++;
                        }
                    } else if (progress[index]) {
                        completedRiddles++;
                    }
                }
            });

            // é€²æ—ã‚µãƒãƒªãƒ¼ã®æ›´æ–°
            progressSummaryMain.innerHTML = `
                <div class="text-center p-4 bg-gray-800/50 rounded-xl border border-primary-gold/70 shadow-inner">
                    <p class="text-sm font-medium text-secondary-sepia mb-1">
                        ç¾åœ¨ã®ã‚¯ãƒªã‚¢é€²æ— (è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
                    </p>
                    <p class="text-4xl font-extrabold text-white text-glow">
                        ${completedRiddles} / ${totalAnswerableRiddles} 
                        <span class="text-lg font-medium text-gray-400">å€‹ã‚¯ãƒªã‚¢</span>
                    </p>
                </div>
            `;
            // ------------------------------------


            riddles.forEach((riddle, index) => {
                const isInteractive = riddle.interactive !== false; 
                let isCompleted = progress[index] || false; 

                if (riddle.multi) {
                    const solvedAnswers = loadMultiProgress(index);
                    const totalAnswers = Array.isArray(riddle.answer) ? riddle.answer.length : 1; 
                    isCompleted = solvedAnswers.length === totalAnswers;
                }

                const item = document.createElement('div');
                
                let itemClass = `p-4 rounded-lg flex justify-between items-center transition duration-200`;
                
                if (isInteractive) {
                    // é€šå¸¸ã®è¬
                    itemClass += ` cursor-pointer ${isCompleted 
                        ? 'bg-green-900/40 hover:bg-green-900/60 completed' 
                        : 'bg-gray-900/40 hover:bg-gray-900/60 border border-transparent hover:border-primary-gold/50'}`;
                    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
                    item.onclick = () => loadRiddle(index); 
                } else {
                    // interactive: false ã®è¬ï¼ˆã‚¯ãƒªãƒƒã‚¯ä¸å¯ã€ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼‰
                    itemClass += ' riddle-info-only'; // å°‚ç”¨ã‚¯ãƒ©ã‚¹ã§ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆã‚’é©ç”¨
                    // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã—ãªã„ (ãƒœã‚¿ãƒ³ã¨ã—ã¦æ©Ÿèƒ½ã•ã›ãªã„)
                }
                
                item.className = itemClass;
                
                let statusText = '';
                
                if (isInteractive) { 
                    // é€šå¸¸ã®è¬ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
                    if (riddle.multi) {
                        const solvedAnswers = loadMultiProgress(index);
                        const totalAnswers = Array.isArray(riddle.answer) ? riddle.answer.length : 1; 
                        const solvedCount = solvedAnswers.length;
                        
                        if (solvedCount === totalAnswers) {
                            statusText = `<span class="text-green-400 font-bold text-sm">ã€FULL CLEARã€‘</span>`;
                        } else if (solvedCount > 0) {
                            statusText = `<span class="text-primary-gold font-bold text-sm">${solvedCount}/${totalAnswers} CLEAR</span>`;
                        } else {
                            statusText = '<span class="text-gray-400 text-sm">æœªè§£ç­”</span>';
                        }
    
                    } else {
                        statusText = isCompleted 
                            ? '<span class="text-green-400 font-bold text-sm">ã€CLEARã€‘</span>'
                            : '<span class="text-gray-400 text-sm">æœªè§£ç­”</span>';
                    }
                } 
                // interactive: false ã®è¬ã«ã¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’ã—ãªã„ï¼ˆstatusTextã¯ç©ºã®ã¾ã¾ï¼‰

                item.innerHTML = `
                    <span class="font-medium text-white">No.${riddle.level}. ${riddle.title}</span>
                    ${statusText}
                `;
                riddleList.appendChild(item);
            });
        }
        
        /**
         * ãƒ—ãƒè¬ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ç”»é¢ã‚’è¡¨ç¤ºã—ã€é€²æ—ã‚’æ›´æ–°ã—ã¾ã™ã€‚
         */
        function showMiniChallengePage() {
            miniChallengePage.classList.remove('hidden');
            indexPage.classList.add('hidden');
            gameContainer.classList.add('hidden');
            miniIndexPage.classList.add('hidden'); 
            updateMiniProgress();
        }

        /**
         * ãƒ—ãƒè¬ é€²æ—ç¢ºèªç”»é¢ã‚’è¡¨ç¤ºã—ã€ã‚°ãƒªãƒƒãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
         */
        function showMiniIndexPage() {
            miniChallengePage.classList.add('hidden');
            miniIndexPage.classList.remove('hidden');
            indexPage.classList.add('hidden');
            gameContainer.classList.add('hidden');
            generateMiniProgressGrid();
        }
        
        /**
         * ãƒ—ãƒè¬ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã®é€²æ—è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
         */
        function updateMiniProgress() {
            const solvedAnswers = loadProgress(); 
            const solvedCount = solvedAnswers.length;
            const totalCount = MINI_TOTAL_COUNT;
            
            miniProgressSummary.innerHTML = `
                ${solvedCount} / ${totalCount} 
                <span class="text-lg font-medium text-gray-400">å€‹ã‚¯ãƒªã‚¢</span>
            `;
            
            if (solvedCount === totalCount) {
                miniAnswerInput.disabled = true;
                document.getElementById('mini-submit-button').disabled = true;
                miniAnswerInput.placeholder = "ï¼ˆå…¨å•ã‚¯ãƒªã‚¢ï¼ãŠè¦‹äº‹ã§ã™ï¼ï¼‰";

                showCustomModal(
                    'å®Œå…¨åˆ¶è¦‡ï¼', 
                    '56å•ã™ã¹ã¦ã®ãƒ—ãƒè¬ã‚’è§£ãæ˜ã‹ã—ã¾ã—ãŸï¼ç´ æ™´ã‚‰ã—ã„é›†ä¸­åŠ›ã§ã™ï¼',
                    'é–‰ã˜ã‚‹',
                    'bg-green-600 hover:bg-green-700'
                );
            } else {
                miniAnswerInput.disabled = false;
                document.getElementById('mini-submit-button').disabled = false;
                miniAnswerInput.placeholder = "ç­”ãˆã‚’å…¥åŠ›ï¼ˆã²ã‚‰ãŒãªï¼‰";
            }
        }

        /**
         * ãƒ—ãƒè¬ é€²æ—ç¢ºèªã‚°ãƒªãƒƒãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
         */
        function generateMiniProgressGrid() {
            miniProgressGrid.innerHTML = '';
            const solvedAnswers = loadProgress(); 
            const solvedSet = new Set(solvedAnswers); 
            let unsolvedCount = 0;

            miniAnswers.forEach((answer, index) => {
                const problemNumber = index + 1; 
                const isSolved = solvedSet.has(answer); 
                
                if (!isSolved) {
                    unsolvedCount++;
                }

                const item = document.createElement('div');
                item.textContent = problemNumber;
                
                item.classList.add('mini-progress-item');
                if (isSolved) {
                    item.classList.add('mini-progress-solved');
                } else {
                    item.classList.add('mini-progress-unsolved');
                }

                miniProgressGrid.appendChild(item);
            });
            
            miniIndexUnsolvedCount.textContent = `æœªã‚¯ãƒªã‚¢å•é¡Œæ•°: ${unsolvedCount} å•`;
        }

        /**
         * ãƒ—ãƒè¬ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ã§è§£ç­”ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
         */
        function checkMiniAnswer() {
            const solvedAnswers = loadProgress(); 
            const userAnswer = normalizeText(miniAnswerInput.value);

            if (!userAnswer) {
                miniFeedbackMessage.textContent = 'ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                miniFeedbackMessage.className = 'font-bold text-lg text-gray-500';
                setTimeout(() => { miniFeedbackMessage.textContent = '', 1500 });
                return;
            }

            if (solvedAnswers.includes(userAnswer)) {
                miniFeedbackMessage.textContent = `âœ… ãã®ç­”ãˆï¼ˆ${userAnswer}ï¼‰ã¯ã™ã§ã«æ­£è§£æ¸ˆã¿ã§ã™ã€‚`;
                miniFeedbackMessage.className = 'font-bold text-lg text-gray-400';
                miniAnswerInput.value = '';
                setTimeout(() => { miniFeedbackMessage.textContent = '', 1500 });
                return;
            }

            const isCorrect = miniAnswers.includes(userAnswer);

            if (isCorrect) {
                const newCount = saveMiniAnswer(userAnswer);
                
                miniFeedbackMessage.textContent = `æ­£è§£ï¼ ${newCount}/${MINI_TOTAL_COUNT} ã‚¯ãƒªã‚¢ï¼`; 
                miniFeedbackMessage.className = 'font-bold text-lg text-green-400';
                miniAnswerInput.value = ''; 
                miniAnswerInput.focus();
                
                updateMiniProgress(); 
                
                setTimeout(() => { miniFeedbackMessage.textContent = '', 1500 });
                
            } else {
                miniFeedbackMessage.textContent = 'æ®‹å¿µã€é•ã„ã¾ã™... ã‚‚ã†ä¸€åº¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚';
                miniFeedbackMessage.className = 'font-bold text-lg text-red-400';
                miniAnswerInput.classList.add('border-red-500'); 
                
                setTimeout(() => {
                    miniFeedbackMessage.textContent = '';
                    miniAnswerInput.classList.remove('border-red-500');
                }, 1500);
            }
        }


        /**
         * æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®è¬ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚ï¼ˆã‚²ãƒ¼ãƒ ç”»é¢ã¸ã®åˆ‡ã‚Šæ›¿ãˆï¼‰- ãƒ¡ã‚¤ãƒ³è¬å°‚ç”¨
         */
        function loadRiddle(index) {
            currentLevelIndex = index;
            
            indexPage.classList.add('hidden');
            gameContainer.classList.remove('hidden');
            miniChallengePage.classList.add('hidden'); 
            miniIndexPage.classList.add('hidden'); 

            const riddles = getCurrentRiddles();
            const currentRiddle = riddles[currentLevelIndex];
            
            
            // ç”»é¢è¦ç´ ã®æ›´æ–°
            levelTitle.textContent = `ã€${currentRiddle.title}ã€‘`;
            levelDisplay.textContent = `No.${currentRiddle.level} / ${riddles.filter(r => r.interactive !== false).length}`; // åˆ†æ¯ã‚’è§£ç­”å¯èƒ½ãªæ•°ã«å¤‰æ›´
            
            // è¤‡æ•°å›ç­”ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¨ãƒªã‚¢ã®åˆæœŸåŒ–
            multiAnswerStatus.classList.add('hidden');
            multiAnswerStatus.textContent = '';

            // RiddleTextã‚¨ãƒªã‚¢ã®åˆæœŸåŒ–ã¨ç”»åƒ/å•é¡Œæ–‡ã®æŒ¿å…¥
            riddleText.innerHTML = ''; 
            
            // ç”»åƒã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
            // è¬ãƒ‡ãƒ¼ã‚¿ãŒ 'imageUrls' ã¨ã„ã†ç”»åƒã®é…åˆ—ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’æœŸå¾…
            const mediaUrls = currentRiddle.imageUrls; 

            // ç”»åƒãŒå­˜åœ¨ã—ã€ã‹ã¤ãã‚ŒãŒé…åˆ—ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
            if (mediaUrls && Array.isArray(mediaUrls) && mediaUrls.length > 0) {
    
            // ä»¥å‰ã®ãƒ•ã‚¡ã‚¤ãƒ«åãƒªã‚¹ãƒˆã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¯ã€ã“ã“ã§ã¯çœç•¥ã—ã¾ã™ã€‚
            // å¿…è¦ã§ã‚ã‚Œã°ã€ã“ã®forEachãƒ«ãƒ¼ãƒ—å†…ã§ãƒã‚§ãƒƒã‚¯ã‚’å†å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
    
                mediaUrls.forEach(mediaUrl => {
                    // ç”»åƒãŒå­˜åœ¨ã—ãªã„ï¼ˆURLãŒãªã„ï¼‰è¬ã®ãŸã‚ã«ç©ºæ–‡å­—ãƒã‚§ãƒƒã‚¯
                    if (mediaUrl) { 
                        const img = document.createElement('img');
                        img.src = mediaUrl;
                        img.alt = `è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ No.${currentRiddle.level} ã®å•é¡Œç”»åƒ`;
                        // ã‚¹ã‚¿ã‚¤ãƒ«ï¼šmax-w-full h-auto rounded-lg shadow-xl border border-gray-700
                        // ã•ã‚‰ã«ã€ç”»åƒã¨ç”»åƒã®é–“ã€ã¾ãŸã¯ç”»åƒã¨å•é¡Œæ–‡ã®é–“ã«ãƒãƒ¼ã‚¸ãƒ³ã‚’å…¥ã‚Œã‚‹ mb-4 ã‚’è¿½åŠ 
                        img.className = "max-w-full h-auto rounded-lg shadow-xl border border-gray-700 mb-4"; 
                        
                        // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸimgè¦ç´ ã‚’æ–°ã—ã„divè¦ç´ ã«ç½®ãæ›ãˆã‚‹
                        img.onerror = function() {
                            const errorDiv = document.createElement('div');
                            errorDiv.className = "text-xl text-red-400";
                            errorDiv.textContent = `ç”»åƒ (${mediaUrl}) ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚`;
                            this.replaceWith(errorDiv); 
                                };
                
                riddleText.appendChild(img);
                }
                });

                // ç”»åƒã¨å•é¡Œæ–‡ã®æŒ¿å…¥ä½ç½®ã‚’å¤‰æ›´: ç”»åƒã®å¾Œã«å•é¡Œæ–‡ã‚’é…ç½®ã™ã‚‹
                riddleText.innerHTML += `<p class="mt-4 text-white text-base md:text-xl whitespace-pre-wrap">${currentRiddle.question}</p>`;

            } else {
                // ç”»åƒãŒãªã„å ´åˆã¯å•é¡Œæ–‡ã®ã¿
                riddleText.innerHTML = `<p class="text-white text-xl md:text-2xl whitespace-pre-wrap">${currentRiddle.question}</p>`;
            }

            // ********** ğŸ’¡ è¤‡æ•°è£œåŠ©ãƒœã‚¿ãƒ³è¿½åŠ ã®ãƒ­ã‚¸ãƒƒã‚¯ ğŸ’¡ **********
            
                // currentRiddleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« tools ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆé…åˆ—ï¼‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«å‡¦ç†
                if (currentRiddle.tools && Array.isArray(currentRiddle.tools) && currentRiddle.tools.length > 0) {
                    
                    let buttonsHtml = '<p class="mt-8 flex flex-wrap gap-4 justify-center">'; // ãƒœã‚¿ãƒ³ã‚’æ¨ªã«ä¸¦ã¹ã‚‹ãŸã‚ã« flex ã¨ gap ã‚’ä½¿ç”¨
            
                    currentRiddle.tools.forEach(tool => {
                        // tool.url ã¨ tool.text ã‚’ä½¿ç”¨ã—ã¦ãƒœã‚¿ãƒ³HTMLã‚’ç”Ÿæˆ
                        buttonsHtml += `
                            <a href="${tool.url}" target="_blank" rel="noopener noreferrer">
                                <button class="bg-primary-gold hover:bg-yellow-600 text-gray-900 font-extrabold py-3 px-6 rounded-lg transition duration-200 shadow-xl active:scale-95">
                                    ${tool.text}
                                </button>
                            </a>
                        `;
                    });
                    
                    buttonsHtml += '</p>'; // <p>ã‚¿ã‚°ã‚’é–‰ã˜ã‚‹
            
                    // riddleTextã‚³ãƒ³ãƒ†ãƒŠã®æœ€å¾Œã«è¿½åŠ 
                    riddleText.innerHTML += buttonsHtml; 
                }
        
            // å›ç­”å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®åˆæœŸåŒ–
            answerInput.value = '';
            feedbackMessage.textContent = '';
            
            // è¤‡æ•°å›ç­”æ™‚ã®å‡¦ç†
            if (currentRiddle.multi) {
                const solvedAnswers = loadMultiProgress(currentLevelIndex);
                const totalAnswers = Array.isArray(currentRiddle.answer) ? currentRiddle.answer.length : 1;
                
                multiAnswerStatus.classList.remove('hidden');
                multiAnswerStatus.textContent = `è¤‡æ•°å›ç­”å•é¡Œ: ${solvedAnswers.length}/${totalAnswers} å€‹è§£ç­”æ¸ˆã¿`;
                
                // å…¨ã¦è§£ã‘ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
                const isFullCleared = solvedAnswers.length === totalAnswers;
                
                if (isFullCleared) {
                    answerInput.disabled = true;
                    answerInput.placeholder = "ï¼ˆã™ã¹ã¦ã®ç­”ãˆã‚’è§£ç­”æ¸ˆã¿ã§ã™ï¼‰";
                    document.getElementById('submit-button').disabled = true;
                } else {
                    answerInput.disabled = false;
                    answerInput.placeholder = "ç­”ãˆã‚’å…¥åŠ›ï¼ˆã²ã‚‰ãŒãªï¼‰";
                    document.getElementById('submit-button').disabled = false;
                }
            } else {
                // é€šå¸¸ã®å˜ä¸€å›ç­”ã®è¬ã®å ´åˆ
                const progress = loadProgress();
                const isCleared = progress[currentLevelIndex] || false;
                
                answerInput.disabled = isCleared;
                document.getElementById('submit-button').disabled = isCleared;
                answerInput.placeholder = isCleared ? "ï¼ˆã‚¯ãƒªã‚¢æ¸ˆã¿ã§ã™ï¼‰" : "ç­”ãˆã‚’å…¥åŠ›ï¼ˆã²ã‚‰ãŒãªï¼‰";
            }
        }
        
        /**
         * ä¸æ­£è§£æ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å…±é€šåŒ–ã—ã¾ã™ã€‚
         */
        function showIncorrectFeedback() {
             feedbackMessage.textContent = 'æ®‹å¿µã€é•ã„ã¾ã™... ã‚‚ã†ä¸€åº¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚';
             feedbackMessage.className = 'font-bold text-lg text-red-400';
             answerInput.classList.add('border-red-500'); 
                
             setTimeout(() => {
                 feedbackMessage.textContent = '';
                 answerInput.classList.remove('border-red-500');
             }, 1500);
        }

        /**
         * å›ç­”ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚ï¼ˆãƒ¡ã‚¤ãƒ³è¬å°‚ç”¨ï¼‰
         */
        function checkAnswer() {
            const currentRiddle = getCurrentRiddles()[currentLevelIndex];
            const userAnswer = normalizeText(answerInput.value);
            
            if (!userAnswer) {
                feedbackMessage.textContent = 'ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                feedbackMessage.className = 'font-bold text-lg text-gray-500';
                setTimeout(() => { feedbackMessage.textContent = '', 1500 });
                return;
            }

            // è¤‡æ•°å›ç­”ã®å‡¦ç†
            if (currentRiddle.multi) {
                const correctAnswers = Array.isArray(currentRiddle.answer) ? currentRiddle.answer.map(normalizeText) : [];
                const solvedAnswers = loadMultiProgress(currentLevelIndex);
                
                if (solvedAnswers.includes(userAnswer)) {
                    feedbackMessage.textContent = `âš ï¸ ãã®ç­”ãˆï¼ˆ${userAnswer}ï¼‰ã¯ã™ã§ã«è§£ç­”æ¸ˆã¿ã§ã™ã€‚`;
                    feedbackMessage.className = 'font-bold text-lg text-yellow-500';
                    answerInput.value = '';
                    setTimeout(() => { feedbackMessage.textContent = '', 1500 });
                    return;
                }
                
                if (correctAnswers.includes(userAnswer)) {
                    // æ­£è§£ã®å ´åˆ (è¤‡æ•°å›ç­”ã®ä¸€éƒ¨)
                    saveMultiAnswer(currentLevelIndex, userAnswer);
                    const newSolvedAnswers = loadMultiProgress(currentLevelIndex);
                    const totalAnswers = correctAnswers.length;

                    feedbackMessage.textContent = `âœ¨ æ­£è§£ï¼ ${newSolvedAnswers.length}/${totalAnswers} å€‹ç›®ã®ç­”ãˆã‚’è§£èª­ã—ã¾ã—ãŸã€‚`;
                    feedbackMessage.className = 'font-bold text-lg text-primary-gold';
                    answerInput.value = '';
                    answerInput.focus();
                    
                    multiAnswerStatus.textContent = `è¤‡æ•°å›ç­”å•é¡Œ: ${newSolvedAnswers.length}/${totalAnswers} å€‹è§£ç­”æ¸ˆã¿`;
                    
                    if (newSolvedAnswers.length === totalAnswers) {
                        // å…¨å•ã‚¯ãƒªã‚¢
                        showCustomModal(
                            'FULL CLEARï¼', 
                            `No.${currentRiddle.level} ã€Œ${currentRiddle.title}ã€ã®ã™ã¹ã¦ã®ç­”ãˆã‚’è§£ãæ˜ã‹ã—ã¾ã—ãŸï¼`,
                            'ä¸€è¦§ã«æˆ»ã‚‹',
                            'bg-green-600 hover:bg-green-700 text-white',
                            () => showIndexPage()
                        );
                        answerInput.disabled = true;
                        document.getElementById('submit-button').disabled = true;
                        answerInput.placeholder = "ï¼ˆã™ã¹ã¦ã®ç­”ãˆã‚’è§£ç­”æ¸ˆã¿ã§ã™ï¼‰";
                    } else {
                         setTimeout(() => { feedbackMessage.textContent = '', 2500 });
                    }
                } else {
                    // ä¸æ­£è§£ã®å ´åˆ
                    showIncorrectFeedback();
                }
            } 
            // å˜ä¸€å›ç­”ã®å‡¦ç†
            else {
                const correctAnswer = normalizeText(currentRiddle.answer);
                
                if (userAnswer === correctAnswer) {
                    // æ­£è§£ã®å ´åˆ
                    saveCompletion(currentLevelIndex);
                    
                    showCustomModal(
                        'CLEARï¼', 
                        `No.${currentRiddle.level} ã€Œ${currentRiddle.title}ã€ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸï¼`,
                        'ä¸€è¦§ã«æˆ»ã‚‹',
                        'bg-green-600 hover:bg-green-700 text-white',
                        () => showIndexPage()
                    );
                    
                    answerInput.disabled = true;
                    document.getElementById('submit-button').disabled = true;
                    answerInput.placeholder = "ï¼ˆã‚¯ãƒªã‚¢æ¸ˆã¿ã§ã™ï¼‰";

                } else {
                    // ä¸æ­£è§£ã®å ´åˆ
                    showIncorrectFeedback();
                }
            }
        }
        
        /**
         * é€²æ—ãƒªã‚»ãƒƒãƒˆã®ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
         * @param {string} collection - 'main' or 'mini'
         */
        function confirmClearProgress(collection) {
            const collectionName = collection === 'main' ? 'è¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³' : 'ãƒ—ãƒè¬';
            const key = collection === 'main' ? MAIN_STORAGE_KEY : MINI_COMPLETED_ANSWERS_KEY;
            const multiKey = collection === 'main' ? MAIN_MULTI_STORAGE_KEY : null;

            showCustomModal(
                'âš ï¸ é€²æ—ãƒªã‚»ãƒƒãƒˆã®ç¢ºèª',
                `<p class="text-red-600 font-semibold">æœ¬å½“ã«${collectionName}ã®é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ</p><p>ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚</p>`,
                'ãƒªã‚»ãƒƒãƒˆã™ã‚‹',
                'bg-red-500 hover:bg-red-600 text-white',
                () => {
                    // ç¢ºå®šæ™‚ã®å‡¦ç†
                    localStorage.removeItem(key);
                    if (multiKey) {
                        localStorage.removeItem(multiKey);
                    }
                    showCustomModal(
                        'âœ… ãƒªã‚»ãƒƒãƒˆå®Œäº†',
                        `${collectionName}ã®é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚`,
                        'é–‰ã˜ã‚‹',
                        'bg-green-500 hover:bg-green-600 text-white',
                        () => {
                            // UIã‚’æ›´æ–°
                            if (collection === 'main') {
                                showIndexPage();
                            } else {
                                showMiniChallengePage();
                            }
                        }
                    );
                },
                'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'
            );
        }

        // --- åˆæœŸåŒ– ---
        window.onload = function() {
            // åˆæœŸè¡¨ç¤ºã¯ã‚¤ãƒ³ãƒˆãƒ­ç”»é¢
            showIntroPage(); 
        };
        
    </script>
</body>
</html>
